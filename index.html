<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù…ØªØ¬Ø± ELR Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
  <style>
    :root{
      --brown:#4b2e2e;
      --accent:#7b4f46;
      --white:#fff;
      --muted:#f4f1ef;
      --card:#fbf8f7;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
      background:var(--muted);
      color:var(--brown);
      direction:rtl;
    }
    header{
      background:var(--brown);
      color:white;
      display:flex;
      align-items:center;
      gap:12px;
      padding:12px 16px;
      position:sticky;
      top:0;
      z-index:100;
    }
    .hamburger{
      font-size:24px;
      cursor:pointer;
      background:none;
      border:none;
      color:white;
      margin-left:auto; /* make left in RTL */
    }
    .logo{
      font-weight:700;
      font-size:20px;
      margin-right:8px;
      color:#ffd;
    }
    nav.nav-links{
      display:flex;
      gap:10px;
      align-items:center;
      margin-right:8px;
      flex-wrap:wrap;
    }
    nav.nav-links a{
      color:white;
      text-decoration:none;
      padding:6px 10px;
      border-radius:6px;
    }
    nav.nav-links a:hover{background:rgba(255,255,255,0.08)}
    .lang-btn{
      margin-left:12px;
      background:white;
      color:var(--brown);
      border:none;
      padding:6px 10px;
      border-radius:6px;
      cursor:pointer;
    }

    main{max-width:1000px;margin:18px auto;padding:0 12px}
    section{
      background:var(--card);
      border-radius:10px;
      padding:18px;
      margin-bottom:14px;
      box-shadow:0 2px 6px rgba(0,0,0,0.04);
    }
    h1,h2{margin:0 0 10px 0;color:var(--brown)}
    .greeting{margin:8px 0;color:var(--accent)}
    img.logo-img{max-width:180px;display:block;margin:8px 0}

    /* comments */
    .comment-form input,.comment-form textarea{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid #ddd;
      margin-bottom:8px;
      resize:vertical;
      font-size:14px;
    }
    .comment-form button{
      background:var(--brown);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:8px;
      cursor:pointer;
    }
    .comments-list .comment-card{
      background:white;
      padding:10px;
      border-radius:8px;
      margin-top:10px;
      border:1px solid #eee;
      position:relative;
    }
    .comment-card .meta{font-size:13px;color:#666;margin-bottom:6px}
    .comment-card .text{white-space:pre-wrap}

    footer{
      text-align:center;
      background:var(--brown);
      color:white;
      padding:12px;
      margin-top:18px;
    }

    /* responsive nav */
    @media (max-width:768px){
      nav.nav-links{display:none;position:absolute;left:0;right:0;top:56px;background:var(--white);flex-direction:column;padding:8px}
      nav.nav-links a{color:var(--brown);border-bottom:1px solid #eee;padding:10px}
      nav.nav-links.active{display:flex}
      .hamburger{display:inline-block}
      .logo{margin-right:auto}
      .lang-btn{position:absolute;left:12px;top:12px}
    }
    @media (min-width:769px){
      .hamburger{display:none}
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">ELR</div>

    <nav class="nav-links" id="navLinks">
      <a href="#home" data-key="home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
      <a href="#about" data-key="about">Ù…Ù† Ù†Ø­Ù†</a>
      <a href="#products" data-key="products">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</a>
      <a href="#contact" data-key="contact">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
      <a href="#comments" data-key="comments">ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</a>
    </nav>

    <button class="hamburger" id="hamburgerBtn" aria-label="menu">â˜°</button>
    <button class="lang-btn" id="langBtn">English</button>
  </header>

  <main id="mainContent">
    <!-- content injected by JS -->
  </main>

  <footer id="footer">
    <!-- footer text injected -->
  </footer>

  <!-- Firebase SDKs (compatibility version) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDn9kQklHqskJZLOyb1tugkm5gfv79Ag9w",
      authDomain: "elr-comment.firebaseapp.com",
      databaseURL: "https://elr-comment-default-rtdb.firebaseio.com",
      projectId: "elr-comment",
      storageBucket: "elr-comment.firebasestorage.app",
      messagingSenderId: "613467240959",
      appId: "1:613467240959:web:1ab0abe0686913ca87cfca",
      measurementId: "G-MTQWBQ462D"
    };
    firebase.initializeApp(firebaseConfig);
    const analytics = firebase.analytics();
    const db = firebase.database();
  </script>

  <script>
    /* ---------- data & translations ---------- */
    const translations = {
      ar: {
        home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
        about: "Ù…Ù† Ù†Ø­Ù†",
        products: "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
        contact: "ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§",
        comments: "ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",
        homeTitle: "Ù…Ø±Ø­Ø¨Ø§ Ø¨ÙƒÙ… ÙÙŠ Ù…ØªØ¬Ø± ELR Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
        slogan: "Ø®Ø¯Ù…Ø§Øª Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ±Ù‚Ù…ÙŠØ© Ø¨Ø¯Ù‚Ø© ÙˆØ³Ø±Ø¹Ø©",
        aboutContent: "Ù…ØªØ¬Ø± Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù„Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø§Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ§Ù„Ø±Ù‚Ù…ÙŠØ© Ø¨Ø¯Ù‚Ø© Ùˆ Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø©.",
        productsContent: `
          <h3>1- Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</h3>
          <ul>
            <li>Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</li>
            <li>Ø¨ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©</li>
            <li>Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© USDT ÙÙŠ Ø§Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø´Ø±Ø§Ø¡</li>
          </ul>
          <h3>2- Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù…</h3>
          <ul>
            <li>ØªÙˆØ«ÙŠÙ‚ Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù…</li>
            <li>Ø´Ø±Ø§Ø¡ Ù†Ø¬ÙˆÙ… Ø§Ù„ØªÙ„Ø¬Ø±Ø§Ù…</li>
          </ul>
        `,
        contactContent: `
          <p>Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù…: <a href="https://t.me/ElnourMohammedAhmed" target="_blank">Telegram.me/ElnourMohammedAhmed</a></p>
          <p>Ø±Ø§Ø¨Ø· Ø§Ù„ÙÙŠØ³Ø¨ÙˆÙƒ: <a href="https://facebook.me/ElnourMohammedAhmed" target="_blank">Facebook.me/ElnourMohammedAhmed</a></p>
          <p>Ø§Ù„Ø®Ø· Ø§Ù„Ø³Ø§Ø®Ù†: +249111118226</p>
        `,
        commentsTitle: "ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",
        placeholderName: "Ø§Ù„Ø§Ø³Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)",
        placeholderComment: "Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§",
        submitBtn: "Ø¥Ø±Ø³Ø§Ù„",
        guest: "Ø²Ø§Ø¦Ø±",
        footerText: "Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© ELR 2025",
        greetingMorning: "â˜€ï¸ ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±",
        greetingAfternoon: "ğŸŒ Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±",
        greetingEvening: "ğŸŒ™ Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ±"
      },
      en: {
        home: "Home",
        about: "About Us",
        products: "Products",
        contact: "Contact Us",
        comments: "Customer Comments",
        homeTitle: "Welcome to ELR E-Store",
        slogan: "Electronic & digital services with speed and accuracy",
        aboutContent: "A complete online store for electronic and digital services with high accuracy and speed.",
        productsContent: `
          <h3>1- Digital Currencies</h3>
          <ul>
            <li>Buy digital currencies</li>
            <li>Sell digital currencies</li>
            <li>Trade with USDT currency</li>
          </ul>
          <h3>2- Telegram Services</h3>
          <ul>
            <li>Telegram verification</li>
            <li>Buy Telegram stars</li>
          </ul>
        `,
        contactContent: `
          <p>Telegram: <a href="https://t.me/ElnourMohammedAhmed" target="_blank">Telegram.me/ElnourMohammedAhmed</a></p>
          <p>Facebook: <a href="https://facebook.me/ElnourMohammedAhmed" target="_blank">Facebook.me/ElnourMohammedAhmed</a></p>
          <p>Hotline: +249111118226</p>
        `,
        commentsTitle: "Customer Comments",
        placeholderName: "Name (optional)",
        placeholderComment: "Write your comment here",
        submitBtn: "Submit",
        guest: "Guest",
        footerText: "All rights reserved Â© ELR 2025",
        greetingMorning: "Good Morning â˜€ï¸",
        greetingAfternoon: "Good Afternoon ğŸŒ",
        greetingEvening: "Good Evening ğŸŒ™"
      }
    };

    let currentLang = 'ar'; // default

    /* ---------- helpers ---------- */
    function t(key){ return translations[currentLang][key]; }

    function formatDateForDisplay(isoString){
      try{
        const dt = new Date(isoString);
        const locale = currentLang === 'ar' ? 'ar-EG' : 'en-US';
        return dt.toLocaleString(locale);
      }catch(e){
        return isoString;
      }
    }

    function getGreeting(){
      const h = new Date().getHours();
      if(h >=5 && h < 12) return t('greetingMorning');
      if(h >=12 && h <18) return t('greetingAfternoon');
      return t('greetingEvening');
    }

    /* ---------- render sections ---------- */
    function renderHeaderText(){
      document.querySelectorAll('#navLinks a').forEach(a=>{
        const key = a.dataset.key;
        a.textContent = translations[currentLang][key] || a.textContent;
      });
      const btn = document.getElementById('langBtn');
      btn.textContent = currentLang === 'ar' ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
      document.getElementById('footer').textContent = translations[currentLang].footerText;
    }

    function loadPageFromHash(){
      const hash = location.hash || '#home';
      loadPage(hash);
    }

    function loadPage(hash){
      const main = document.getElementById('mainContent');
      if(!hash.startsWith('#')) hash = '#home';
      switch(hash){
        case '#home':
          main.innerHTML = `
            <section id="home">
              <h1>${t('homeTitle')}</h1>
              <p class="greeting">${getGreeting()}</p>
              <p>${t('slogan')}</p>
              <img class="logo-img" src="logo.png" alt="ELR Logo" onerror="this.style.display='none'">
            </section>
          `;
          break;

        case '#about':
          main.innerHTML = `
            <section id="about">
              <h2>${t('about')}</h2>
              <p>${t('aboutContent')}</p>
            </section>
          `;
          break;

        case '#products':
          main.innerHTML = `
            <section id="products">
              <h2>${t('products')}</h2>
              ${t('productsContent')}
            </section>
          `;
          break;

        case '#contact':
          main.innerHTML = `
            <section id="contact">
              <h2>${t('contact')}</h2>
              ${t('contactContent')}
            </section>
          `;
          break;

        case '#comments':
          main.innerHTML = `
            <section id="commentsSection">
              <h2>${t('commentsTitle')}</h2>
              <div class="comment-form">
                <input id="nameInput" type="text" placeholder="${t('placeholderName')}" />
                <textarea id="commentInput" rows="4" placeholder="${t('placeholderComment')}"></textarea>
                <button id="submitComment">${t('submitBtn')}</button>
              </div>
              <div class="comments-list" id="commentsList"></div>
            </section>
          `;
          attachCommentsHandlers();
          renderCommentsFirebase();
          break;

        default:
          location.hash = '#home';
          return;
      }
      renderHeaderText();
    }

    /* ---------- hamburger ---------- */
    document.getElementById('hamburgerBtn').addEventListener('click', ()=>{
      const nav = document.getElementById('navLinks');
      nav.classList.toggle('active');
    });

    // Ø§ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ø±Ø§Ø¨Ø· Ù…Ù†Ù‡Ø§ (ÙÙŠ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©)
    document.querySelectorAll('#navLinks a').forEach(link => {
      link.addEventListener('click', () => {
        const nav = document.getElementById('navLinks');
        if(nav.classList.contains('active')){
          nav.classList.remove('active');
        }
      });
    });

    /* ---------- language toggle ---------- */
    document.getElementById('langBtn').addEventListener('click', ()=>{
      currentLang = currentLang === 'ar' ? 'en' : 'ar';
      document.documentElement.lang = currentLang === 'ar' ? 'ar' : 'en';
      document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
      loadPage(location.hash || '#home');
    });

    /* ---------- comments logic using Firebase ---------- */

    function saveCommentFirebase(comment){
      const commentsRef = db.ref('comments');
      commentsRef.push(comment);
    }

    function loadCommentsFirebase(callback){
      const commentsRef = db.ref('comments');
      commentsRef.on('value', snapshot => {
        const data = snapshot.val() || {};
        const commentsArray = Object.values(data);
        callback(commentsArray);
      });
    }

    function attachCommentsHandlers(){
      const submitBtn = document.getElementById('submitComment');
      const nameInput = document.getElementById('nameInput');
      const commentInput = document.getElementById('commentInput');

      submitBtn.addEventListener('click', ()=>{
        const text = commentInput.value.trim();
        if(!text) return alert(currentLang === 'ar' ? 'Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© ØªØ¹Ù„ÙŠÙ‚' : 'Please write a comment');

        const nameVal = nameInput.value.trim() || '';
        const entry = {
          name: nameVal,
          text,
          ts: new Date().toISOString()
        };

        saveCommentFirebase(entry);

        nameInput.value = '';
        commentInput.value = '';
      });
    }

    function renderCommentsFirebase(){
      loadCommentsFirebase((commentsArray) => {
        const list = document.getElementById('commentsList');
        if(!list) return;
        list.innerHTML = '';
        if(commentsArray.length === 0){
          list.innerHTML = `<p style="color:#666">${ currentLang==='ar' ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø¨Ø¹Ø¯' : 'No comments yet' }</p>`;
          return;
        }
        commentsArray.forEach(c => {
          const card = document.createElement('div');
          card.className = 'comment-card';
          const displayName = c.name && c.name.length ? c.name : translations[currentLang].guest;
          const dateText = formatDateForDisplay(c.ts);
          card.innerHTML = `
            <div class="meta"><strong>${escapeHtml(displayName)}</strong> â€¢ <span>${escapeHtml(dateText)}</span></div>
            <div class="text">${escapeHtml(c.text)}</div>
          `;
          list.appendChild(card);
        });
      });
    }

    function escapeHtml(str){
      if(!str) return '';
      return String(str)
        .replace(/&/g,'&amp;')
        .replace(/</g,'&lt;')
        .replace(/>/g,'&gt;')
        .replace(/"/g,'&quot;')
        .replace(/'/g,'&#039;');
    }

    window.addEventListener('hashchange', ()=> loadPage(location.hash || '#home'));

    document.addEventListener('DOMContentLoaded', ()=>{
      renderHeaderText();
      loadPage(location.hash || '#home');
    });
  </script
